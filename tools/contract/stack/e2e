#!/usr/bin/env bash
set -euo pipefail
REPO_ROOT="${REPO_ROOT:-$(git rev-parse --show-toplevel 2>/dev/null || pwd)}"
PROJECTS_DIR="${REPO_ROOT}/projects"

if [[ -d "${PROJECTS_DIR}" ]] && [[ -f "${PROJECTS_DIR}/package.json" ]]; then
  cd "${PROJECTS_DIR}"
else
  cd "${REPO_ROOT}"
fi

# E2E tests - run if script exists in package.json
if pnpm -w run e2e --if-present 2>/dev/null; then
  exit 0
else
  echo "No e2e script found. Skipping."
  exit 0
fi
